var route=function(){"use strict";var e=function(u){u=u||{};var o={},c=Array.prototype.slice;Object.defineProperties(u,{on:{value:function(e,t){if(typeof t=="function"){(o[e]=o[e]||[]).push(t)}return u},enumerable:false,writable:false,configurable:false},off:{value:function(e,t){if(e=="*"&&!t){o={}}else{if(t){var n=o[e];for(var r=0,i;i=n&&n[r];++r){if(i==t){n.splice(r--,1)}}}else{delete o[e]}}return u},enumerable:false,writable:false,configurable:false},one:{value:function(e,t){function n(){u.off(e,n);t.apply(u,arguments)}return u.on(e,n)},enumerable:false,writable:false,configurable:false},trigger:{value:function(e){var t=arguments;var n=arguments.length-1,r=new Array(n),i,f,a;for(a=0;a<n;a++){r[a]=t[a+1]}i=c.call(o[e]||[],0);for(a=0;f=i[a];++a){f.apply(u,r)}if(o["*"]&&e!="*"){u.trigger.apply(u,["*",e].concat(r))}return u},enumerable:false,writable:false,configurable:false}});return u};var n=/^.+?\/\/+[^/]+/,t="EventListener",r="remove"+t,i="add"+t,f="hasAttribute",a="popstate",u="hashchange",o="trigger",c=3,l=typeof window!="undefined"&&window,s=typeof document!="undefined"&&document,h=l&&history,p=l&&(h.location||l.location),d=P.prototype,v=s&&s.ontouchstart?"touchstart":"click",m=e();var y=false,b=false,g,w,$,A,S,x=[],K=0;function N(e){return e.split(/[/?#]/)}function O(e,t){var n=t.replace(/\?/g,"\\?").replace(/\*/g,"([^/?#]+?)").replace(/\.\./,".*");var r=new RegExp("^"+n+"$");var i=e.match(r);if(i){return i.slice(1)}}function T(e,t){var n;return function(){clearTimeout(n);n=setTimeout(e,t)}}function E(e){g=T(L,1);l[i](a,g);l[i](u,g);s[i](v,R);if(e){L(true)}}function P(){this.$=[];e(this);m.on("stop",this.s.bind(this));m.on("emit",this.e.bind(this))}function j(e){return e.replace(/^\/|\/$/,"")}function k(e){return typeof e=="string"}function q(e){return(e||p.href).replace(n,"")}function D(e){return w[0]==="#"?(e||p.href||"").split(w)[1]||"":(p?q(e):e||"").replace(w,"")}function L(t){var e=K===0;if(c<=K){return}K++;x.push(function(){var e=D();if(t||e!==$){m[o]("emit",e);$=e}});if(e){var n;while(n=x.shift()){n()}K=0}}function R(e){if(e.which!==1||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented){return}var t=e.target;while(t&&t.nodeName!=="A"){t=t.parentNode}if(!t||t.nodeName!=="A"||t[f]("download")||!t[f]("href")||t.target&&t.target!=="_self"||t.href.indexOf(p.href.match(n)[0])===-1){return}if(t.href!==p.href&&(t.href.split("#")[0]===p.href.split("#")[0]||w[0]!=="#"&&q(t.href).indexOf(w)!==0||w[0]==="#"&&t.href.split(w)[0]!==p.href.split(w)[0]||!_(D(t.href),t.title||s.title))){return}e.preventDefault()}function _(e,t,n){if(!h){return m[o]("emit",D(e))}e=w+j(e);t=t||s.title;n?h.replaceState(null,t,e):h.pushState(null,t,e);s.title=t;b=false;L();return b}d.m=function(e,t,n){if(k(e)&&(!t||k(t))){_(e,t,n||false)}else if(t){this.r(e,t)}else{this.r("@",e)}};d.s=function(){this.off("*");this.$=[]};d.e=function(n){this.$.concat("@").some(function(e){var t=(e==="@"?A:S)(j(n),j(e));if(typeof t!="undefined"){this[o].apply(null,[e].concat(t));return b=true}},this)};d.r=function(e,t){if(e!=="@"){e="/"+j(e);this.$.push(e)}this.on(e,t)};var z=new P;var B=z.m.bind(z);B.create=function(){var e=new P;var t=e.m.bind(e);t.stop=e.s.bind(e);return t};B.base=function(e){w=e||"#";$=D()};B.exec=function(){L(true)};B.parser=function(e,t){if(!e&&!t){A=N;S=O}if(e){A=e}if(t){S=t}};B.query=function(){var r={};var e=p.href||$;e.replace(/[?&](.+?)=([^&]*)/g,function(e,t,n){r[t]=n});return r};B.stop=function(){if(y){if(l){l[r](a,g);l[r](u,g);s[r](v,R)}m[o]("stop");y=false}};B.start=function(e){if(!y){if(l){if(document.readyState==="interactive"||document.readyState==="complete"){E(e)}else{document.onreadystatechange=function(){if(document.readyState==="interactive"){setTimeout(function(){E(e)},1)}}}}y=true}};B.base();B.parser();return B}();